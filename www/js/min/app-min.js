var app=angular.module("app",["ngRoute","mgcrea.ngStrap","controllers"]);app.config(["$routeProvider","$httpProvider","$provide",function(t,e,r){t.when("/",{controller:"MainController",templateUrl:"home/home.view.html"}).when("/login",{controller:"LoginController",templateUrl:"login/login.view.html"}).when("/dashboard",{controller:"DashboardController",templateUrl:"dashboard/dashboard.view.html"}).when("/facility/:id",{templateUrl:"facility/facility.view.html",controller:"FacilityController"}).when("/task/:id/:facility",{templateUrl:"task/task.view.html",controller:"TaskController"}).when("/request-adhoc/:id",{templateUrl:"request/request.view.html",controller:"RequestController"}).when("/update-image-task/:id/:facility",{templateUrl:"task/update-image.view.html",controller:"TaskUpdateImageController"}).when("/logout",{templateUrl:"home/home.view.html",controller:"LogoutController"}).otherwise({templateUrl:"404.html"}),e.interceptors.push("authInterceptor"),r.decorator("$controller",function(t){return function(e,r,o,n){return"string"!=typeof e||r.$scope.controllerName||(r.$scope.controllerName=e),t(e,r,o,n)}})}]),app.factory("authInterceptor",function(t,e,r){return{request:function(t){return e.sessionStorage.access_token&&(t.headers.Authorization="Bearer "+e.sessionStorage.access_token),t},responseError:function(e){return 401===e.status&&r.path("/login").replace(),t.reject(e)}}}),app.service("rest",function(t,e,r){return{baseUrl:"http://kelle.don/api/web/v1/",path:void 0,models:function(){return t.get(this.baseUrl+this.path+location.search)},model:function(){return null!=r.expand?t.get(this.baseUrl+this.path+"/"+r.id+"?expand="+r.expand):t.get(this.baseUrl+this.path+"/"+r.id)},get:function(){return t.get(this.baseUrl+this.path)},postModel:function(e){return t.post(this.baseUrl+this.path,e)},putModel:function(e){return t.put(this.baseUrl+this.path+"/"+r.id,e)},deleteModel:function(){return t["delete"](this.baseUrl+this.path)}}}),app.directive("login",["$http",function(t){return{transclude:!0,link:function(t,e,r){t.isGuest=void 0==window.sessionStorage._auth},template:'<a href="login" ng-if="isGuest">Login</a>'}}]).filter("checkmark",function(){return function(t){return t?"✓":"✘"}}),app.directive("back",["$window",function(t){return{restrict:"A",link:function(e,r,o){r.bind("click",function(){t.history.back()})}}}]);