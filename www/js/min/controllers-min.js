var controllers=angular.module("controllers",[]),ajaxUrl="http://kelle.don/api/web/v1";app.controller("MainController",["$scope","$location","$window",function(i,l,t){i.loggedIn=function(){return Boolean(t.sessionStorage.access_token)},i.logout=function(){delete t.sessionStorage.access_token,l.path("/login").replace()}}]),app.controller("LoginController",["$scope","$http","$window","$location",function(i,l,t,o){i.login=function(){i.submitted=!0,i.error={},l.post(ajaxUrl+"/user/login",i.userModel).success(function(i){console.log(i),t.sessionStorage.access_token=i.access_token,t.sessionStorage.building_id=i.building_id,o.path("/dashboard").replace()}).error(function(l){angular.forEach(l,function(l){i.error[l.field]=l.message})})}}]),app.controller("DashboardController",["$scope","$http","$window",function(i,l,t){function o(i){return i.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}var a="",e="/view-building?id=";building_id=t.sessionStorage.building_id,void 0!==building_id&&null!=building_id&&jQuery.get(ajaxUrl+"/buildings/view-building?id="+building_id,function(l){i.building=l,$("#building-name").html(l.name),blocks=l.building_facilities,blockFilter="",floorFilter="",facilityIdFilter="",blockHtml="",jQuery.each(blocks,function(i,l){blockFilter+='<option value="#block-'+o(l.block)+'">'+l.block+"</option>",floorFilter+='<option value="#floor-'+o(l.floor)+'">'+l.floor+"</option>",facilityIdFilter+='<option value="#facilityID-'+o(l.facility_name)+'">'+l.facility_name+"</option>",blockHtml+='<li class="block-item" ><a href="#/facility/'+l.id+'"><div class="block-info"><div class="block-title">'+l.block+'</div><div class="block-info-item"><label>Floor: </label>'+l.floor+'</div><div class="block-info-item"><label>Facility Type: </label>'+l.facility.facility_type+'</div><div class="block-info-item"><label>Facility ID:</label>'+l.facility_name+'</div></div><div class="block-rating"><select class="block-rating-star"> <option value="1"></option> <option value="2"></option> <option value="3"></option> <option selected value="4"></option> <option value="5"></option> </select><div class="block-rating-number">4.5</div><div class="block-rating-label">Ratings</div></div><div class="clearfix" ></div></a></li>'}),$("#block-filter").html(blockFilter),$("#floor-filter").html(floorFilter),$("#facility-filter").html(facilityIdFilter),$("#block-list").html(blockHtml),$(".block-rating-star").barrating({theme:"fontawesome-stars",readonly:!0})})}]),app.controller("FacilityController",["$scope","$location","$window","$routeParams",function(i,l,t,o){jQuery.get(ajaxUrl+"/buildings/view-facility?id="+o.id,function(l){i.facility=l,console.log(l),$("#building-name").html(l.building.name),$("#facility-name").html(l.block),$("#facility-date").html(l.created_at),$("#facility-floor").html(l.floor),$("#facility-type").html(l.facility.facility_type),$("#facility-id").html(l.facility_name),tasks=l.tasks,tasksHtml="",jQuery.each(tasks,function(i,l){tasksHtml+='<li class="task-item"> <div class="inner"> <div class="container"> <div class="task-item-title">'+l.name+'</div> <div class="task-action"> <select class="block-rating-star"> <option value="1"></option> <option value="2"></option> <option value="3"></option> <option selected value="4"></option> <option value="5"></option> </select> <a class="edit-facility" href="#/task/'+l.id+'">Edit</a> </div> </div> <div class="image-control"> <a class="image-button btn-image-update" href="#"><i class="fa fa-camera" aria-hidden="true"></i></a> </div> </div> </li>'}),$("#task-list").html(tasksHtml),$(".block-rating-star").barrating({theme:"fontawesome-stars",readonly:!0})})}]),app.controller("TaskController",["$scope","$location","$window","$routeParams",function(i,l,t,o){jQuery.get(ajaxUrl+"/buildings/view-task?id="+o.id,function(l){i.facility=l,console.log(l),$("#building-name").html(l.building.name),$("#facility-name").html(l.block),$("#facility-date").html(l.created_at),$("#facility-floor").html(l.floor),$("#facility-type").html(l.facility.facility_type),$("#facility-id").html(l.facility_name),tasks=l.tasks,tasksHtml="",jQuery.each(tasks,function(i,l){tasksHtml+='<li class="task-item"> <div class="inner"> <div class="container"> <div class="task-item-title">'+l.name+'</div> <div class="task-action"> <select class="block-rating-star"> <option value="1"></option> <option value="2"></option> <option value="3"></option> <option selected value="4"></option> <option value="5"></option> </select> <a class="edit-facility" href="#/view-task/'+l.id+'">Edit</a> </div> </div> <div class="image-control"> <a class="image-button btn-image-update" href="#"><i class="fa fa-camera" aria-hidden="true"></i></a> </div> </div> </li>'}),$("#task-list").html(tasksHtml),$(".block-rating-star").barrating({theme:"fontawesome-stars",readonly:!0})})}]),app.controller("LogoutController",["$location","$window",function(i,l){l.sessionStorage.clear(),i.path("/")}]);