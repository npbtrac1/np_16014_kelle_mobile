(function(){Array.prototype.remove=function(m){var w=this.slice(m+1);this.length=m;return this.push.apply(this,w)};var B=function(){var m=null,w=null,g=[],z=null,u=function(m){z?z(m):m&&console.log("the picture contains nudity")};return{init:function(){m=document.createElement("canvas");m.style.display="none";document.getElementsByTagName("body")[0].appendChild(m);w=m.getContext("2d")},load:function(g){"string"==typeof g&&(g=document.getElementById(g));m.width=g.width;m.height=g.height;z=null;w.drawImage(g,
0,0)},scan:function(B){0<arguments.length&&"function"==typeof arguments[0]&&(z=B);var k=w.getImageData(0,0,m.width,m.height).data,d=[],n=[],f=[],l,r=-1,x=-1,D=k.length;l=m.width;for(var y=0,p=1;y<D;y+=4,p++){var A=p>l?p%l-1:p,v=p>l?Math.ceil(p/l)-1:1,a=k[y],b=k[y+1],c=k[y+2],q=95<a&&40<b&&100>b&&20<c&&15<Math.max(a,b,c)-Math.min(a,b,c)&&15<Math.abs(a-b)&&a>b&&a>c,e;e=a+b+c;e=[a/e,b/e,c/e];e=1.185<e[0]/e[1]&&.107<a*c/Math.pow(a+b+c,2)&&.112<a*b/Math.pow(a+b+c,2);var h;h=Math.max(a,b,c);var t=h-Math.min(a,
b,c);h=h==a?(b-c)/t:h==b?2+(b-a)/t:4+(a-b)/t;h*=60;0>h&&(h+=360);b=[h,1-Math.min(a,b,c)/(a+b+c)*3,1/3*(a+b+c)];a=b[0];b=b[1];if(q||e||0<a&&35>a&&.23<b&&.68>b){d.push({id:p,skin:!0,region:0,x:A,y:v,checked:!1});e=-1;A=[p-2,p-l-2,p-l-1,p-l];a=!1;for(v=0;4>v;v++)if(q=A[v],d[q]&&d[q].skin){if(d[q].region!=e&&-1!=e&&r!=e&&x!=d[q].region){a=d[q].region;r=e;x=a;b=f.length;for(h=c=-1;b--;)for(var t=f[b],C=t.length;C--;)t[C]==e&&(c=b),t[C]==a&&(h=b);if(-1==c||-1==h||c!=h)-1==c&&-1==h?f.push([e,a]):-1!=c&&
-1==h?f[c].push(a):-1==c&&-1!=h?f[h].push(e):-1!=c&&-1!=h&&c!=h&&(f[c]=f[c].concat(f[h]),f.remove(h))}e=d[q].region;a=!0}a?-1<e&&(n[e]||(n[e]=[]),d[p-1].region=e,n[e].push(d[p-1])):(d[p-1].region=n.length,n.push([d[p-1]]))}else d.push({id:p,skin:!1,region:0,x:A,y:v,checked:!1})}d=f.length;for(k=[];d--;)for(l=f[d],r=l.length,k[d]||(k[d]=[]);r--;)x=l[r],k[d]=k[d].concat(n[x]),n[x]=[];for(f=n.length;f--;)0<n[f].length&&k.push(n[f]);n=k.length;for(f=0;f<n;f++)30<k[f].length&&g.push(k[f]);n=g.length;f=
m.width*m.height;k=0;if(3>n)u(!1);else{for(d=!1;!d;)for(d=!0,l=0;l<n-1;l++)g[l].length<g[l+1].length&&(d=!1,r=g[l],g[l]=g[l+1],g[l+1]=r);for(;n--;)k+=g[n].length;15>k/f*100?u(!1):35>g[0].length/k*100&&30>g[1].length/k*100&&30>g[2].length/k*100?u(!1):45>g[0].length/k*100?u(!1):60<g.length?u(!1):u(!0)}}}}();window.nude=B;B.init()})();
