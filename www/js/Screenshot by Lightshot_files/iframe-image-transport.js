function IframeImageTransport(a,b){this.mainOrigin=a;this.iframeOrigin=b;this.viewport_sizes={width:0,height:0}}IframeImageTransport.prototype.loadImageToIframe=function(a,b){document.getElementById("image-iframe").contentWindow.postMessage({name:"open",url:a,id36:b,width:$(window).width()-40,height:$(window).height()},this.iframeOrigin)};
IframeImageTransport.prototype.resizeIframe=function(a,b){$("#id".replace("id","envelope"));var d=$("#id iframe".replace("id","envelope"))[0];$("#id div".replace("id","envelope"));d.style.height=a+"px";d.style.width=b+"px";d.style.display=""};
IframeImageTransport.prototype.insertImage=function(a,b){var d=this,c=$("<img>");c.attr("src",a).attr("id","image-img").attr("class","image-framed").css("max-width",d.viewport_sizes.width);$(document.body).append(c);c.click(function(){c.toggleClass("image-framed-maximized");c.hasClass("image-framed-maximized")?c.css("max-width",""):c.css("max-width",d.viewport_sizes.width)});var e=new Image;e.crossOrigin="Anonymous";e.src=a;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||
(nude.init(),c.load(function(){setTimeout(function(){nude.load(e);nude.scan(function(a){a&&((new Image).src="http://nudity.prntscr.com/report/nude/{id}".replace("{id}",b))})},1E3)}));var f=0,g=0;window.setInterval(function(){var a=document.getElementById("image-img");a&&f!==a.width&&g!=a.height&&(f=a.width,g=a.height,window.top.postMessage({name:"resize",width:f,height:g},d.mainOrigin))},5)};
IframeImageTransport.prototype.registerIframeWindow=function(){var a=this;window.addEventListener("message",function(b){(b.origin||b.originalEvent.origin)==a.mainOrigin&&"open"==b.data.name&&(a.viewport_sizes.height=b.data.height,a.viewport_sizes.width=b.data.width,a.insertImage(b.data.url,b.data.id36))},!1);window.top.postMessage({name:"iframe_loaded"},this.mainOrigin)};
IframeImageTransport.prototype.registerMainWindow=function(a,b){var d=this;window.addEventListener("message",function(c){(c.origin||c.originalEvent.origin)==d.iframeOrigin&&("iframe_loaded"==c.data.name?d.loadImageToIframe(a,b):"resize"==c.data.name&&d.resizeIframe(c.data.height,c.data.width))},!1)};
